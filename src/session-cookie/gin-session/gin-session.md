# 使用示例(redis为例):
```
package main

import (
	"github.com/gin-contrib/sessions"
	"github.com/gin-contrib/sessions/redis"
	"github.com/gin-gonic/gin"
)

func main() {
	r := gin.Default()
	store, _ := redis.NewStore(10, "tcp", "localhost:6379", "", []byte("secret"))
	r.Use(sessions.Sessions("mysession", store))

	r.GET("/incr", func(c *gin.Context) {
		session := sessions.Default(c)
		var count int
		v := session.Get("count")
		if v == nil {
			count = 0
		} else {
			count = v.(int)
			count++
		}
		session.Set("count", count)
		session.Save()
		c.JSON(200, gin.H{"count": count})
	})
	r.Run(":8000")
}
```

> `**备注：**其实重度基于"github.com/gorilla/sessions"***`。

(w,r)
session 每个session是浏览器和服务器之间的一次会话,每个session拥有对应的store
store 可以生成一个session

# session
```
type session struct {
	name    string
	request *http.Request
	store   Store
	session *sessions.Session
	written bool
	writer  http.ResponseWriter
}
```

对上包含(w,r),这里*session.Session,所以对下包含(store)
```
// Session stores the values and optional configuration for a session.
type Session struct {
	// The ID of the session, generated by stores. It should not be used for
	// user data.
	ID string
	// Values contains the user-data for the session.
	Values  map[interface{}]interface{}
	Options *Options
	IsNew   bool
	store   Store
	name    string
}
```


# 调用:
r.Use(sessions.Sessions("mysession", store))[
	--> s := &session{name, c.Request, store, nil, false, c.Writer}
	--> set到gin的context的xxx key里
]
--> session := sessions.Default(c) 从gin的context的xx key里拿
--> session.Get("count")[
	这里有个懒加载
	func (s *session) Get(key interface{}) interface{} {
		return s.Session().Values[key]
	}
	s.Session()
	当s.session是空,从s.store里生成一条新的session出来
]

> `**备注：**lazy load***`。


# redis store
```
type store struct {
	*redistore.RediStore
}
```

这里其实是重度用了`"github.com/gomodule/redigo/redis"`